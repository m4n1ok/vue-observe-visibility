var VueObserveVisibility=function(e){"use strict";!function(){function e(e){this.value=e}function t(t){var n,i;function r(n,i){try{var s=t[n](i),a=s.value;a instanceof e?Promise.resolve(a.value).then(function(e){r("next",e)},function(e){r("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?r(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise(function(o,s){var a={key:e,arg:t,resolve:o,reject:s,next:null};i?i=i.next=a:(n=i=a,r(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};var r=function(){function e(n,i,r){t(this,e),this.el=n,this.observer=null,this.createObserver(i,r)}return n(e,[{key:"createObserver",value:function(e,t){var n,r,o,s,a,c,l,u=this;this.observer&&this.destroyObserver(),this.options="function"==typeof(n=e).value?{callback:n.value,once:n.once}:{callback:n.value.callback,intersection:n.intersection,once:n.once},this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=(r=this.callback,o=this.options.throttle,s=void 0,a=void 0,c=void 0,(l=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];c=n,s&&e===a||(a=e,clearTimeout(s),s=setTimeout(function(){r.apply(void 0,[e].concat(i(c))),s=0},o))})._clear=function(){clearTimeout(s)},l)),this.observer=new IntersectionObserver(function(e){var t=e[0],n=t.isIntersecting&&t.intersectionRatio>=u.threshold;u.callback&&u.callback(n,t),n&&u.options.once&&(u.observer.unobserve(u.el),u.destroyObserver(),delete u.el._vue_visibilityState)},this.options.intersection),t.context.$nextTick(function(){u.observer.observe(u.el)})}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.callback&&this.callback._clear&&this.callback._clear()}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}(),o={bind:function(e,t,n){var i=t.value,o=t.modifiers;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s={value:i,once:"once"in o&&o.once};e._vue_visibilityState=new r(e,s,n)}},update:function(e,t,n){var i=t.value,r=t.modifiers,o=e._vue_visibilityState;if(o)o.createObserver(i,n);else{var s={value:i,once:"once"in r&&r.once};this.bind(e,s,n)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};function s(e){e.directive("observe-visibility",o)}var a={version:"0.4.1",install:s},c=null;return"undefined"!=typeof window?c=window.Vue:"undefined"!=typeof global&&(c=global.Vue),c&&c.use(a),e.install=s,e.ObserveVisibility=o,e.default=a,e}({});
